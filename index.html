<!DOCTYPE html>
<html>
<head>
  <title>JSON-UI</title>
</head>
<body>
  <link href="./index.css" rel="stylesheet">
  <h1 id="logo">JUP</h1>
<div id="editor"></div>
  <div id="preview"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ext-language_tools.js"></script>
  <script>
    var editor = ace.edit("editor");
    editor.$blockScrolling = Infinity;
    editor.setOptions({
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/json");
  </script>
  <script>
    const vdef = {
      "$title_text_color": "#000000",
      "$container_title": "チェスト"
    }
    const render = document.getElementById('preview')
    let code = '{"namespace":"chest","jupre":["chest_label"], "chest_label":{"type":"label","layer":2,"offset":[7,-1],"size":["90%","default"],"anchor_from":"top_left","anchor_to":"top_left","text":"$container_title","color":"$title_text_color","localize":"$localize_title"}}'
    const codeObj = JSON.parse(code)
    const main = codeObj.jupre
    let html = "";
    for (const obj of main){
      html += newObj(obj)
    }
    render.innerHTML = html;
    
    function covValue(value) {
      if (vdef[value]){
      return vdef[value]
      }
      return value
    }

    function newObj(ob) {
      switch (obj.type) {
        case "label":
        return `<p>${covValue(obj.text)}</p>`
      }
    }
  </script>
</body>
</html>
